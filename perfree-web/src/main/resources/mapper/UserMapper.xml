<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.perfree.mapper.UserMapper">

    <resultMap id="USER_INFO" type="com.perfree.model.User">
        <id property="id" column="id"></id>
        <result property="account" column="account"></result>
        <result property="userName" column="userName"></result>
        <result property="password" column="password"></result>
        <result property="salt" column="salt"></result>
        <result property="status" column="status"></result>
        <result property="avatar" column="avatar"></result>
        <result property="roleId" column="roleId"></result>
        <result property="email" column="email"></result>
        <result property="website" column="website"></result>
        <result property="createTime" column="createTime"></result>
        <result property="updateTime" column="updateTime"></result>
        <association property="role" select="getByRoleId" column="id">
        </association>
    </resultMap>

    <select id="getLoginInfo" resultMap="USER_INFO">
        SELECT t.* FROM `p_user` t  where t.account = #{account, jdbcType=VARCHAR} and t.`status` = 0
    </select>

    <select id="getByRoleId" resultType="com.perfree.model.Role">
        SELECT t.* FROM `p_role` t  where t.id = #{id, jdbcType=VARCHAR}
    </select>
</mapper>
